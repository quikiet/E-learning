<div class="max-w-5xl mx-auto py-6">
  <!-- Loading State -->
  @if (isLoading) {
  <div class="flex justify-center items-center min-h-[200px]">
    <p-progressSpinner
      styleClass="w-12 h-12 sm:w-16 sm:h-16"
    ></p-progressSpinner>
  </div>
  }

  <!-- Summary Metrics -->
  @if (!isLoading && analystData) {
  <div
    class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-8"
  >
    <div
      [once]="true"
      pAnimateOnScroll
      enterClass="animate-enter fade-in-10 slide-in-from-l-8 animate-duration-1000"
      leaveClass="animate-leave fade-out-0"
      class="bg-white hover:shadow-lg hover:border-secondary border border-gray-200 hover:shadow-secondary-light transition duration-200 shadow rounded-xl p-4 sm:p-6"
    >
      <div class="flex justify-between flex-warp items-center">
        <div>
          <h2 class="text-base sm:text-lg font-semibold text-gray-700">
            Total Revenue
          </h2>
          <p class="md:text-lg font-bold text-primary">
            {{ formatCurrency(analystData.total_revenue) }}
          </p>
        </div>
        <i class="pi pi-wallet text-lg sm:text-xl text-secondary"></i>
      </div>
    </div>
    <div
      pAnimateOnScroll
      [once]="true"
      enterClass="animate-enter fade-in-10 slide-in-from-l-8 animate-duration-1000"
      leaveClass="animate-leave fade-out-0"
      class="bg-white hover:shadow-lg hover:border-secondary border border-gray-200 hover:shadow-secondary-light transition duration-200 shadow rounded-xl p-4 sm:p-6"
    >
      <div class="flex justify-between flex-warp items-center">
        <div>
          <h2 class="text-base sm:text-lg font-semibold text-gray-700">
            Total Users
          </h2>
          <p class="md:text-lg font-bold text-primary">
            {{ analystData.total_users }}
          </p>
        </div>
        <i class="pi pi-users text-lg sm:text-xl text-secondary"></i>
      </div>
    </div>
    <div
      [once]="true"
      pAnimateOnScroll
      enterClass="animate-enter fade-in-10 slide-in-from-r-8 animate-duration-1000"
      leaveClass="animate-leave fade-out-0"
      class="bg-white hover:shadow-lg hover:border-secondary border border-gray-200 hover:shadow-secondary-light transition duration-200 shadow rounded-xl p-4 sm:p-6"
    >
      <div class="flex justify-between flex-warp items-center">
        <div>
          <h2 class="text-base sm:text-lg font-semibold text-gray-700">
            Total Instructors
          </h2>
          <p class="md:text-lg font-bold text-primary">
            {{ analystData.total_instructors }}
          </p>
        </div>
        <i class="pi pi-graduation-cap text-lg sm:text-xl text-secondary"></i>
      </div>
    </div>
    <div
      pAnimateOnScroll
      [once]="true"
      enterClass="animate-enter fade-in-10 slide-in-from-r-8 animate-duration-1000"
      leaveClass="animate-leave fade-out-0"
      class="bg-white hover:shadow-lg hover:border-secondary border border-gray-200 hover:shadow-secondary-light transition duration-200 shadow rounded-xl p-4 sm:p-6"
    >
      <div class="flex justify-between flex-warp items-center">
        <div>
          <h2 class="text-base sm:text-lg font-semibold text-gray-700">
            Total Courses
          </h2>
          <p class="md:text-lg font-bold text-primary">
            {{ analystData.total_courses }}
          </p>
        </div>
        <i class="pi pi-book text-lg sm:text-xl text-secondary"></i>
      </div>
    </div>
  </div>
  }

  <!-- Charts -->
  @if (!isLoading && analystData) {
  <div
    class="grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 items-start w-full"
  >
    <!-- Pie Chart: Courses by Status -->
    <div
      [once]="true"
      pAnimateOnScroll
      enterClass="animate-enter fade-in-10 slide-in-from-l-8 animate-duration-1000"
      leaveClass="animate-leave fade-out-0"
      class="bg-white shadow rounded-xl p-4 sm:p-6 flex justify-center"
    >
      <div class="w-full max-w-md">
        <h2 class="text-base sm:text-lg font-semibold text-gray-700 mb-4">
          Courses by Status
        </h2>
        <p-chart
          type="pie"
          [data]="pieChartData"
          [options]="pieChartOptions"
          class="w-full h-64 sm:h-80 lg:h-96"
        ></p-chart>
      </div>
    </div>
    <!-- Bar Chart: Courses by Category -->
    <div
      [once]="true"
      pAnimateOnScroll
      enterClass="animate-enter fade-in-10 slide-in-from-r-8 animate-duration-1000"
      leaveClass="animate-leave fade-out-0"
      class="lg:col-span-2 bg-white shadow rounded-xl p-4 sm:p-6 w-full"
    >
      <h2 class="text-base sm:text-lg font-semibold text-gray-700 mb-4">
        Courses by Category
      </h2>
      <div>
        <p-chart
          type="bar"
          [data]="barChartData"
          [options]="barChartOptions"
          class="w-full h-64 sm:h-80 lg:h-96"
        ></p-chart>
      </div>
    </div>
  </div>
  }

  <app-revenue class="block w-full"></app-revenue>
</div>

<p-toast position="top-center"></p-toast>
