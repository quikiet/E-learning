<!-- <main
  class="max-w-7xl mx-auto flex flex-col md:flex-row items-center justify-between gap-10 md:gap-20 rounded-md bg-gradient-to-r from-[#f3e7e1] to-[#d9f0f0]"
>
  <div class="mt-24 bg-white w-full h-full p-6">
    <div class="flex items-center justify-between gap-5">
      <div class="flex items-center gap-5">
        <p-avatar
          image="https://primefaces.org/cdn/primeng/images/demo/avatar/amyelsner.png"
          size="xlarge"
          shape="circle"
        />
        <div>
          <span class="font-bold text-lg">Trần Quí Kiệt</span>
          <p class="text-gray-500 text-sm">quikiet2003Agmail.com</p>
        </div>
      </div>
      <div>
        <p-button label="Sửa" severity="info" />
      </div>
    </div>
    <div class="pt-6">
      <div class="flex justify-between w-full gap-10">
        <div class="flex flex-col gap-2 w-full py-2">
          <app-form-element [label]="'Họ và tên'">
            <input
              class="text-sm custom-input w-full px-4 py-3 rounded-md focus:outline-gray-200 bg-dark-light"
              placeholder="Enter text here"
              type="text"
              id="unique-input"
            />
          </app-form-element>
        </div>

        <div class="flex flex-col gap-2 w-full py-2">
          <app-form-element [label]="'Tên người dùng'">
            <input
              class="text-sm custom-input w-full px-4 py-3 rounded-md focus:outline-gray-200 bg-dark-light"
              placeholder="Enter text here"
              type="text"
              id="unique-input"
            />
          </app-form-element>
        </div>
      </div>
      <div class="flex justify-between w-full gap-10">
        <div class="flex flex-col gap-2 w-full py-2">
          <app-form-element [label]="'Địa chỉ email'">
            <input
              class="text-sm custom-input w-full px-4 py-3 rounded-md focus:outline-gray-200 bg-dark-light"
              placeholder="Enter text here"
              type="text"
              id="unique-input"
            />
          </app-form-element>
        </div>
        <div class="flex flex-col gap-2 w-full py-2">
          <app-form-element [label]="'Số điện thoại'">
            <input
              class="text-sm custom-input w-full px-4 py-3 rounded-md focus:outline-gray-200 bg-dark-light"
              placeholder="Enter text here"
              type="text"
              id="unique-input"
            />
          </app-form-element>
        </div>
      </div>
      <div class="flex justify-between w-full gap-10">
        <div class="flex flex-col gap-2 w-full py-2">
          <app-form-element [label]="'Giới tính'">
            <p-select
              [options]="cities"
              [(ngModel)]="selectedCity"
              placeholder="Gender"
              [editable]="true"
              optionLabel="name"
              class="w-full !bg-dark-light"
            />
          </app-form-element>
        </div>
        <div class="flex flex-col gap-2 w-full py-2">
          <app-form-element [label]="'Quốc gia'">
            <p-select
              [options]="cities"
              [(ngModel)]="selectedCity"
              placeholder="Country"
              [editable]="true"
              optionLabel="name"
              class="w-full !bg-dark-light"
            />
          </app-form-element>
        </div>
      </div>
    </div>
    <p-divider />
    <div class="pt-6">
      <h3 class="text-xl font-bold pb-3">Thay đổi mật khẩu</h3>
      <div class="flex flex-col gap-2 w-full py-2">
        <app-form-element [label]="'Mật khẩu hiện tại'">
          <p-password
            [toggleMask]="true"
            [feedback]="false"
            placeholder="Nhập mật khẩu"
          />
        </app-form-element>
      </div>
      <div class="flex flex-col gap-2 w-full py-2">
        <app-form-element [label]="'Mật khẩu mới'">
          <p-password
            [toggleMask]="true"
            placeholder="Nhập mật khẩu mới"
            promptLabel="Điền mật khẩu mới"
            weakLabel="Bảo mật yếu"
            mediumLabel="Trung bình"
            strongLabel="Mật khẩu tốt"
          />
        </app-form-element>
      </div>
      <div class="flex flex-col gap-2 w-full py-2">
        <app-form-element [label]="'Mật khẩu mới'">
          <p-password
            [toggleMask]="true"
            placeholder="Nhập mật khẩu mới"
            promptLabel="Điền mật khẩu mới"
            weakLabel="Bảo mật yếu"
            mediumLabel="Trung bình"
            strongLabel="Mật khẩu tốt"
          />
        </app-form-element>
      </div>
      <div class="w-full text-end my-4">
        <p-button label="Thay đổi" severity="warn" />
      </div>
    </div>
    <div class="pt-6">
      <p-divider />
      <h3 class="text-xl font-bold pb-3">Xoá tài khoản</h3>
      <div>
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Sed omnis
        doloribus odit sit mollitia impedit iste debitis architecto unde nostrum
        alias nulla aliquid, fugiat temporibus nihil harum quibusdam ad quia.
      </div>
      <div class="w-full text-end my-4">
        <p-button label="Xoá tài khoản" severity="danger" />
      </div>
    </div>
    <div class="rounded border border-surface-200 p-6 bg-surface-0 pt-2">
      <div class="flex mb-4">
        <p-skeleton shape="circle" size="4rem" styleClass="mr-2" />
        <div>
          <p-skeleton width="10rem" styleClass="mb-2" />
          <p-skeleton width="5rem" styleClass="mb-2" />
          <p-skeleton height=".5rem" />
        </div>
      </div>
      <p-skeleton width="100%" height="150px" />
      <div class="flex justify-between mt-4">
        <p-skeleton width="4rem" height="2rem" />
        <p-skeleton width="4rem" height="2rem" />
      </div>
    </div>
  </div>
</main> -->

<main
  class="max-w-7xl mx-auto flex flex-col md:flex-row items-center justify-between gap-10 md:gap-20 rounded-md bg-gradient-to-r from-[#f3e7e1] to-[#d9f0f0]"
>
  <div class="mt-24 bg-white w-full h-full p-6">
    <p-toast></p-toast>
    <form
      [formGroup]="profileForm"
      (ngSubmit)="onSubmit()"
      enctype="multipart/form-data"
    >
      <div class="flex items-center justify-between gap-5">
        <div class="flex items-center gap-5">
          <p-avatar
            [image]="avatarPreview || user?.avatar"
            size="xlarge"
            shape="circle"
          />
          <div>
            <span class="font-bold text-lg">{{
              user?.username || "Tên người dùng"
            }}</span>
            <p class="text-gray-500 text-sm">
              {{ user?.email || "email@example.com" }}
            </p>
          </div>
        </div>
        <div>
          <p-fileUpload
            mode="basic"
            accept="image/*"
            [maxFileSize]="2000000"
            chooseLabel="Tải ảnh lên"
            (onSelect)="onFileSelect($event)"
            [auto]="true"
            [customUpload]="true"
            invalidFileSizeMessageSummary="File quá lớn: "
            invalidFileSizeMessageDetail="Kích thước tối đa là 2MB."
          />
          <!-- <input type="file" (change)="onFileSelect($event)" /> -->
        </div>
      </div>
      <div class="pt-6">
        <div class="flex justify-between w-full gap-10">
          <div class="flex flex-col gap-2 w-full py-2">
            <app-form-element
              label="Tên người dùng"
              [control]="profileForm.get('username')!"
              [required]="true"
            >
              <input
                pInputText
                class="text-sm w-full px-4 py-3 rounded-md"
                formControlName="username"
                placeholder="Nhập tên người dùng"
                required
              />
            </app-form-element>
          </div>
          <div class="flex flex-col gap-2 w-full py-2">
            <app-form-element
              label="Birthdate"
              [control]="profileForm.get('birthdate')!"
            >
              <p-datepicker
                formControlName="birthdate"
                [showIcon]="true"
                placeholder="YYYY-MM-DD"
              />
            </app-form-element>
          </div>
        </div>
        <div class="flex justify-between w-full gap-10">
          <div class="flex flex-col gap-2 w-full py-2">
            <app-form-element [label]="'Trình độ học vấn'">
              <p-select
                [options]="LoE"
                formControlName="LoE_DI"
                optionLabel="name"
                optionValue="value"
                placeholder="Trình độ"
                class="w-full"
              />
            </app-form-element>
          </div>
          <div class="flex flex-col gap-2 w-full py-2">
            <app-form-element label="Giới tính">
              <p-select
                [options]="genderOptions"
                formControlName="gender"
                placeholder="Chọn giới tính"
                optionLabel="label"
                optionValue="value"
                class="w-full"
              />
            </app-form-element>
          </div>
        </div>
        <div class="flex justify-between w-full gap-10">
          <!-- <div
            class="flex flex-col gap-2 w-full py-2"
            *ngIf="user?.role === 'student'"
          >
            <app-form-element label="Danh mục quan tâm">
              <p-multiSelect
                [options]="categories"
                formControlName="category_ids"
                placeholder="Chọn danh mục"
                optionLabel="label"
                optionValue="value"
                class="w-full"
              />
            </app-form-element>
            <app-form-element [label]="'Danh mục bạn quan tâm'">
              <div class="flex flex-wrap gap-3">
                <div *ngFor="let cat of categories">
                  <p-checkbox
                    [inputId]="'cat' + cat.id"
                    [value]="cat.id"
                    formControlName="category_ids"
                  />
                  <label for="{{ 'cat' + cat.id }}" class="ml-2">
                    {{ cat.name }}
                  </label>
                </div>
              </div>
            </app-form-element>
          </div> -->
        </div>
        <div *ngIf="user?.role === 'instructor'">
          <div class="flex flex-col gap-2 w-full py-2">
            <app-form-element
              label="Tiểu sử"
              [control]="profileForm.get('bio')!"
            >
              <textarea
                pInputTextarea
                class="w-full"
                formControlName="bio"
                placeholder="Nhập tiểu sử (tối đa 1000 ký tự)"
                rows="4"
              ></textarea>
            </app-form-element>
          </div>
          <div class="flex flex-col gap-2 w-full py-2">
            <app-form-element
              label="Tổ chức"
              [control]="profileForm.get('organization')!"
            >
              <input
                pInputText
                class="text-sm w-full px-4 py-3 rounded-md"
                formControlName="organization"
                placeholder="Nhập tổ chức"
              />
            </app-form-element>
          </div>
          <div class="flex flex-col gap-2 w-full py-2">
            <app-form-element
              label="Họ và tên giảng viên"
              [control]="profileForm.get('name')!"
            >
              <input
                pInputText
                class="text-sm w-full px-4 py-3 rounded-md"
                formControlName="name"
                placeholder="Nhập họ và tên"
              />
            </app-form-element>
          </div>
        </div>
        <div class="flex justify-end gap-2 mt-4">
          <p-button label="Hủy" severity="secondary" (onClick)="resetForm()" />
          <p-button
            label="Lưu"
            type="submit"
            [disabled]="profileForm.invalid || isSubmitting"
          />
        </div>
      </div>
    </form>
    <p-divider />
    <!-- Password Change Section (Placeholder for Future Implementation) -->
    <div class="pt-6">
      <h3 class="text-xl font-bold pb-3">Thay đổi mật khẩu</h3>
      <form [formGroup]="passwordForm" (ngSubmit)="onResetPassword()">
        <div class="flex flex-col gap-2 w-full py-2">
          <app-form-element [label]="'Mật khẩu hiện tại'" [required]="true">
            <p-password
              [toggleMask]="true"
              [feedback]="false"
              placeholder="Nhập mật khẩu"
            />
          </app-form-element>
        </div>
        <div class="flex flex-col gap-2 w-full py-2">
          <app-form-element [label]="'Mật khẩu mới'" [required]="true">
            <p-password
              [toggleMask]="true"
              placeholder="Nhập mật khẩu mới"
              promptLabel="Điền mật khẩu mới"
              weakLabel="Bảo mật yếu"
              mediumLabel="Trung bình"
              strongLabel="Mật khẩu tốt"
            />
          </app-form-element>
        </div>
        <div class="flex flex-col gap-2 w-full py-2">
          <app-form-element [label]="'Mật khẩu mới'" [required]="true">
            <p-password
              [toggleMask]="true"
              placeholder="Nhập mật khẩu mới"
              promptLabel="Điền mật khẩu mới"
              weakLabel="Bảo mật yếu"
              mediumLabel="Trung bình"
              strongLabel="Mật khẩu tốt"
            />
          </app-form-element>
        </div>
        <div class="flex justify-end gap-2 mt-4">
          <p-button
            label="Hủy"
            severity="secondary"
            (onClick)="resetPasswordForm()"
          />
          <p-button
            label="Đặt lại mật khẩu"
            type="submit"
            [disabled]="passwordForm.invalid || isPasswordSubmitting"
          />
        </div>
      </form>
    </div>
    <p-divider />
    <!-- Account Deletion Section (Placeholder for Future Implementation) -->
    <div class="pt-6">
      <h3 class="text-xl font-bold pb-3">Xóa tài khoản</h3>
      <p>Chức năng xóa tài khoản sẽ được triển khai sau.</p>
    </div>
  </div>
</main>
